---
layout: posts
title: "블루아카이브 ERD 작성(2)"
date: 2024-06-25
categories:
  - DBA
tags: ["ERD", "Database", "DBA"]
---

## - 요구사항 정리

![26-1.png](/assets/img/26-1.png)

### - 1. 재화, 우편함

작성하다 깨달은것이 로비학생은 데이터베이스에 담기지 않는게 아니냐는 궁금증이였다.

로비학생은 단순히 당번 학생을 선택하여 로비에 띄우는 기능인데, 이 기능은 다른 기기에서 그대로 가져오는것이 아닌 다시 초기값으로 되어 세팅해줘야 한다는걸 깨달았다.

고로 클라이언트 측에서 관리되는 데이터로 ERD 에서 빼기로 했다.

|재화|우편함|메일아이템|
|:---:|:---:|:---:|
|크레딧|메일ID|메일아이템ID|
|AP|메일아이템ID|아이템ID|
|청휘석|우편내용|아이템개수|
|엘리그마|||
|숙련증서|||

<br>

### - 2. 일일미션, 모모톡

|일일미션|모모톡|
|:---:|:---:|
|미션ID|학생ID|
|진행도|학생호감도|
|아이템ID|이벤트단계|
|아이템개수|톡내용|
|달성유무|아이템ID|
||아이템개수|

<br>

### - 3. 카페, 스케쥴, 학생, 편성, 서클, 제조, 상점, 가구

게임 메뉴상의 서클 콘텐츠 기능만 작성하였으며 서클 리스트 관리 엔티티는 유저ID와 서클ID를 통해 유저를 추가하는 방법으로 설계하면 될거같지만 A 라는 서클에 유저를 추가한다면 서클수만큼 엔티티가 있어야 하는게 아닌가.. 고민하며 이 부분은 공부를 해보기로 하였다.

우선 끝내는걸 목표로 간단하게 짜보기로 했다.

|카페|스케쥴|학생|편성|서클|제조|상점|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|아이템ID|지역ID|학생ID|학생ID|서클명|아이템ID|아이템ID|
|배치위치|지역레벨|학생_성|편성ID|서클ID|제조시간|아이템가격|
|학생ID|학생ID|학생레벨|스트라이커1|가입방식|제조욥션|품절|
|쾌적도||학생스킬레벨1|스트라이커2|멤버수|||
|카페수익||학생스킬레벨2|스트라이커3|인사말|||
|학생호감쿨타임||학생스킬레벨3|스트라이커4|채팅|||
|다음방문쿨타임||학생스킬레벨4|서포터1||||
|초대권쿨타임||학생장비1|서포터2||||
|인연레벨||학생장비2|||||
|||학생장비3|||||
|||학생애장품|||||
|||인연레벨|||||
|||학생전용무기|||||
|||공격력|||||
|||HP|||||
|||치유력|||||
|||방어력|||||
|||회피치|||||
|||명중치|||||
|||회심피해|||||
|||회심치|||||
|||안정치|||||
|||방어관통치|||||
|||CC강화력|||||
|||사거리|||||
|||코스트회복력|||||
|||CC저항력|||||
|||시가지적응력|||||
|||야외적응력|||||
|||실내적응력|||||

<br>

### - 4. 스토리미션, 스토리, 현상수배, 특별임무, 학원교류회, 총력전, 대결전, 종합전술시험, 전술대항전

현상수배, 특별임무, 학원교류회는 각 동일한 속성을 중복으로 가지고 있어서 해당 속성만 빼서 임무 엔티티를 하나 새로 만들고 그 안에 넣기로 했다.

|스토리미션|스토리|현상수배|특별임무|학원교류회|총력전|대결전|종합전술시험|전술대항전|임무|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|지역|스토리장|~~임무종류~~|~~임무종류~~|~~임무종류~~|보스ID|보스ID|점수|등수|미션ID|
|스테이지|스토리화|~~미션단계~~|~~미션단계~~|~~미션단계~~|점수|점수1|아이템ID|크레딧보상|임무종류|
|클리어_성||~~클리어_성~~|~~클리어_성~~|~~클리어_성~~||점수2|아이템개수|청휘석보상|미션단계|
|난이도||아이템ID|아이템ID|아이템ID||점수3|||클리어_성|
|||아이템개수|아이템개수|아이템개수||||||
||||크레딧개수|||||||

<br>

### - 5. 유저, 친구, 아이템, 티켓, 소유아이템

|유저|친구|아이템|티켓|소유아이템|
|:---:|:---:|:---:|:---:|:---:|
|유저ID|유저ID|아이템ID|스케쥴티켓|아이템ID|
|이름|친구수|가구_성|현상수배티켓|아이템개수|
|레벨||쾌적도|학원교류회티켓||
|UID|||총력전티켓||
|등록학생수|||대결전_경장갑티켓||
|인사말|||대결전_중장갑티켓||
|당번|||대결전_특수장갑티켓||
||||종합전술시험티켓||
||||전술경연대회티켓||
||||연합작전티켓||

<br>

엔티티 속성을 작성하며 정규화가 되어있지 않다는 생각을 많이 하게 되었다.

메일 엔티티같은 경우에는 하나의 메일 ID에 하나의 아이템과 수량을 입력할 수 있지만, 보통은 메일 하나에 여러 아이템이 들어가있을때가 많았다.

이 부분을 생각했을땐, 메일아이템이라는 엔티티를 하나 만들고 거기에 아이템ID, 수량 속성을 추가하여 여러 아이템을 입력하고 해당 엔티티 ID를 메일 엔티티로 보내게 되면 되지않을까 생각해보고 수정 후 마무리하였다.